<md-dialog aria-label="Mango (Fruit)" flex="50" flex-sm="50">
    <md-toolbar md-theme="{{triSkin.elements.content}}">
        <div class="md-toolbar-tools">
            <h2>
                <span translate>Agregar Usuario</span>
            </h2>
        </div>
    </md-toolbar>

    <md-divider></md-divider>

    <md-dialog-content class="sticky-container">
        <div>
            <form name="taskForm" novalidate>

                <md-input-container>
                    <label>Usuario</label>
                    <input type="text" name="usuario" ng-model="vm.usuario.usuario" class="dialog-close"
                           required
                           usuario-dato-unico="{propiedad: 'usuario'}"
                           ng-model-options="{
                                updateOn: 'default blur',
                                debounce: {
                                  'default': 500,
                                  'blur': 0
                                }
                              }">
                    <div ng-messages="taskForm.usuario.$dirty && taskForm.usuario.$error">
                        <div ng-message when="required">
                            <span translate>Nombre requerido</span>
                        </div>
                        <div ng-message when="unico">
                            <span translate>Elija otro usuario</span>
                        </div>
                    </div>
                </md-input-container>

                <md-input-container>
                    <label>Nombre</label>
                    <input type="text" name="nombre" ng-model="vm.usuario.nombre" class="dialog-close" required>
                    <div ng-messages="taskForm.nombre.$dirty">
                        <div ng-message when="required">
                            <span translate>Nombre requerido</span>
                        </div>
                    </div>
                </md-input-container>

                <md-input-container>
                    <label>Apellido</label>
                    <input type="text" name="apellidos" ng-model="vm.usuario.apellidos" class="dialog-close" required>
                    <div ng-messages="taskForm.apellidos.$dirty">
                        <div ng-message when="required">
                            <span translate>Apellido requerido</span>
                        </div>
                    </div>
                </md-input-container>

                <md-input-container>
                    <label>Correo</label>
                    <input type="text" name="correo" ng-model="vm.usuario.correo" class="dialog-close"
                           required
                           usuario-dato-unico="{propiedad: 'correo'}">
                    <div ng-messages="taskForm.correo.$dirty && taskForm.correo.$error">
                        <div ng-message when="required">
                            <span translate>Correo requerido</span>
                        </div>
                        <div ng-message when="unico">
                            <span translate>Elija otro correo</span>
                        </div>
                    </div>
                </md-input-container>

                <md-input-container>
                    <label>Telefono</label>
                    <input type="text" name="telefono" ng-model="vm.usuario.tel" class="dialog-close" required>
                    <div ng-messages="taskForm.telefono.$dirty">
                        <div ng-message when="required">
                            <span translate>Telefono requerido</span>
                        </div>
                    </div>
                </md-input-container>

                <md-input-container>
                    <label>Clave</label>
                    <input type="text" name="clave" ng-model="vm.usuario.clave" class="dialog-close" required>
                    <div ng-messages="taskForm.clave.$dirty">
                        <div ng-message when="required">
                            <span translate>Clave requerido</span>
                        </div>
                    </div>
                </md-input-container>

                <md-input-container>
                    <label>Dirección</label>
                    <input type="text" name="direccion" ng-model="vm.usuario.direccion" class="dialog-close" required>
                    <div ng-messages="taskForm.direccion.$dirty">
                        <div ng-message when="required">
                            <span translate>Direcci&oacute;n requerido</span>
                        </div>
                    </div>
                </md-input-container>

                <md-input-container>
                    <label>Ciudad</label>
                    <input type="text" name="ciudad" ng-model="vm.usuario.ciudad" class="dialog-close" required>
                    <div ng-messages="taskForm.ciudad.$dirty">
                        <div ng-message when="required">
                            <span translate>Ciudad requerido</span>
                        </div>
                    </div>
                </md-input-container>

                <md-input-container>
                    <md-select placeholder="{{'MENU.TODO.DIALOG.PRIORITY'}}" ng-model="vm.usuario.pais">
                        <md-option value="repdominicana" translate>Rep. Dominicana</md-option>
                        <md-option value="espana" translate>España</md-option>
                    </md-select>
                </md-input-container>



                <md-input-container>
                    <!--<cms-cargar-archivo></cms-cargar-archivo>-->
                    <div ng-show="vm.uploader.isHTML5 && !vm.uploader.queue.length">
                        <!-- Example: nv-file-drop="" uploader="{Object}" options="{Object}" filters="{String}" -->
                        <div nv-file-drop="" uploader="vm.uploader" options="{ url: '/foo' }">
                            <div nv-file-over="" uploader="vm.uploader" over-class="another-file-over-class" class="well my-drop-zone">
                                Arrastrar y soltar imagen aqu&iacute; ...
                            </div>
                        </div>
                    </div>

                    <div ng-show="!vm.uploader.queue.length">
                        <input type="file" id="fileInput" class="btn btn-success btn-s" nv-file-select="" uploader="vm.uploader" multiple aria-label="cargar" accept="image/*"/>
                    </div>

                    <!-- Example: nv-file-select="" uploader="{Object}" options="{Object}" filters="{String}" -->


                    <table class="table">
                        <thead>
                        <tr>
                            <th width="70%"></th>
                            <th></th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr ng-repeat="item in vm.uploader.queue">
                            <td>
                                <div ng-bind="vm.procesarArchivo.getImagen(item)"></div>
                                <!--<strong>{{ item.file.name }}</strong>-->
                                <!-- Image preview -->
                                <!--auto height-->
                                <!--<div ng-thumb="{ file: item.file, width: 100 }"></div>-->
                                <!--auto width-->
                                <div ng-show="vm.uploader.isHTML5 && vm.controller.isImage(item._file)" cms-imagen-vista="{ file: item._file, height: 100 }"></div>
                                <!--fixed width and height -->
                                <!--<div ng-thumb="{ file: item.file, width: 100, height: 100 }"></div>-->
                            </td>

                            <td class="text-center">
                                <span ng-show="item.isError"><i class="glyphicon glyphicon-remove"></i></span>
                            </td>
                            <td nowrap>
                                <button type="button" class="btn btn-danger btn-xs" ng-click="item.remove()">
                                    <span class="glyphicon glyphicon-trash"></span> Remove
                                </button>
                                <!--
                                <button ng-click="vm.uploader.uploadAll()" ng-disabled="!vm.uploader.getNotUploadedItems().length">Upload all</button>
                                <button ng-click="vm.uploader.cancelAll()" ng-disabled="!vm.uploader.isUploading">Cancel all</button>
                                <button ng-click="vm.uploader.clearQueue()" ng-disabled="!vm.uploader.queue.length">Remove all</button>
                                -->
                            </td>
                        </tr>
                        </tbody>
                    </table>


                </md-input-container>

                <!-- TODO -->
                <!--
                <md-input-container>
                    <div>

                        <div>Select an image file: <input type="file" id="fileInput2" /></div>
                        <div class="cropArea">
                            <img-crop image="vm.myImage" result-image="vm.myCroppedImage"></img-crop>
                        </div>
                        <div>Cropped Image:</div>
                        <div><img ng-src="{{vm.myCroppedImage}}" /></div>

                        <img src="{{vm.myCroppedImage}}" />

                        {{vm.myImage}}<br>
                        {{vm.myCroppedImage}}

                    </div>
                </md-input-container>
                -->



            </form>
        </div>
    </md-dialog-content>
    <div class="md-actions" layout="row">
        <span flex></span>
        <md-button ng-click="vm.cancelar()">Cancel</md-button>
        <md-button ng-click="vm.ocultar(vm.uploader.queue)" class="md-primary" ng-disabled="taskForm.$invalid">Ok</md-button>
    </div>
</md-dialog>